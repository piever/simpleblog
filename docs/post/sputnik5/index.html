<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Thoughts and things  | Sputnik project, final update</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.40.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    <link href='https://piever.github.io/simpleblog/dist/main.css' rel='stylesheet' type="text/css" />
    
      
<link rel="shortcut icon" href="https://piever.github.io/simpleblog/favicon.ico" type="image/x-icon" />

    

    

    <meta property="og:title" content="Sputnik project, final update" />
<meta property="og:description" content="This post is a summary of my Google Summer of Code work on project Sputnik: a GUI toolkit based on web technology to analyze data in Julia.
The project had several distinct parts:
Building tools creating UI widgets in Julia Pre-GSoC state of the art While several packages existed already (namely Interact and InteractNext) to create web based widgets in Julia, they both had serious limitations.
Interact could only be run in a Jupyter Notebook and was therefore not suitable to create local electron apps or to serve apps remotely." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://piever.github.io/simpleblog/post/sputnik5/" />



<meta property="article:published_time" content="2018-08-03T00:11:23&#43;00:00"/>

<meta property="article:modified_time" content="2018-08-03T00:11:23&#43;00:00"/>











<meta itemprop="name" content="Sputnik project, final update">
<meta itemprop="description" content="This post is a summary of my Google Summer of Code work on project Sputnik: a GUI toolkit based on web technology to analyze data in Julia.
The project had several distinct parts:
Building tools creating UI widgets in Julia Pre-GSoC state of the art While several packages existed already (namely Interact and InteractNext) to create web based widgets in Julia, they both had serious limitations.
Interact could only be run in a Jupyter Notebook and was therefore not suitable to create local electron apps or to serve apps remotely.">


<meta itemprop="datePublished" content="2018-08-03T00:11:23&#43;00:00" />
<meta itemprop="dateModified" content="2018-08-03T00:11:23&#43;00:00" />
<meta itemprop="wordCount" content="1393">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sputnik project, final update"/>
<meta name="twitter:description" content="This post is a summary of my Google Summer of Code work on project Sputnik: a GUI toolkit based on web technology to analyze data in Julia.
The project had several distinct parts:
Building tools creating UI widgets in Julia Pre-GSoC state of the art While several packages existed already (namely Interact and InteractNext) to create web based widgets in Julia, they both had serious limitations.
Interact could only be run in a Jupyter Notebook and was therefore not suitable to create local electron apps or to serve apps remotely."/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://piever.github.io/simpleblog/" class="f3 fw2 hover-white no-underline white-90 dib">
      Thoughts and things
    </a>
    <div class="flex-l items-center">
      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/simpleblog/about/" title="About me page">
              About me
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/simpleblog/post/" title="Articles page">
              Articles
            </a>
          </li>
          
        </ul>
      
      







  <a href="https://github.com/piever" class="link-transition github link dib z-999 pt3 pt0-l mr2" title="Github link">
    <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

  </a>


    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <p class="f6 b helvetica tracked">
        
        POST
      </p>
      <h1 class="f1 athelas">
        Sputnik project, final update
      </h1>
        
        
      <time class="f6 mv4 dib tracked" datetime="2018-08-03T00:11:23Z">
        August 3, 2018
      </time>
      <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray">
        <p>This post is a summary of my Google Summer of Code work on project Sputnik: a GUI toolkit based on web technology to analyze data in Julia.</p>

<p>The project had several distinct parts:</p>

<h2 id="building-tools-creating-ui-widgets-in-julia">Building tools creating UI widgets in Julia</h2>

<h3 id="pregsoc-state-of-the-art">Pre-GSoC state of the art</h3>

<p>While several packages existed already (namely Interact and InteractNext) to create web based widgets in Julia, they both had serious limitations.</p>

<p>Interact could only be run in a Jupyter Notebook and was therefore not suitable to create local electron apps or to serve apps remotely. InteractNext, while overcoming these limitations, was very tied to a specific CSS framework (Vue Material Design), which we didn't like as it forced the user to rely on a the style of Vue Material Design to get the functionality of InteractNext. This was particular unsatisfying as the Julia port of this framework had several issues: the automatic layout was often a bit off and nesting was not possible (see ...).</p>

<h3 id="new-packages-developed-during-initial-gsoc">New packages developed during initial GSoC</h3>

<p>To overcome this limitation, I rewrote the InteractNext package as <a href="https://github.com/piever/InteractBase.jl/">InteractBase</a>, decoupling the functionality from the styling. I implemented almost all widgets as native HTML widgets (and took advantage of the opportunity to wrap many HTML input types that were not present in InteractBase, such as  <code>date</code>, <code>time</code>, <code>color</code>). I then added style on top of these widgets using some pure CSS frameworks (I tried several of them, <a href="https://bulma.io/">Bulma</a> was my final choice as a default): importantly this framework only affects the display and not the functionality, users can decide to not use it and write their own custom CSS (or even use a different framework / different theme). To allow users to customize the looks of their web app even further I added styling support, in that it is possible to pass either custom classes (potentially already styled by Bulma) or custom styles to the various widgets.</p>

<p>This approach was reasonably successful and the popular <a href="https://github.com/JuliaGizmos/Interact.jl">Interact</a> package was ported to this new framework (<a href="https://vimeo.com/273565899">here</a> is a small demo of how it looks now).</p>

<h3 id="documentation-and-tutorials">Documentation and tutorials</h3>

<p>I've added <a href="https://juliagizmos.github.io/Interact.jl/latest/">documentation</a> to the Interact package, as well as a Jupyter Notebook <a href="https://github.com/JuliaGizmos/Interact.jl/blob/master/doc/notebooks/tutorial.ipynb">tutorial</a> and am working on a pure Julia website based on Interact+Bulma. Here is a demo:</p>

<iframe src="https://player.vimeo.com/video/280767369" width="640" height="318" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

<p>Unfortunately, there seem to be some bugs in the Julia WebSocket integration with multipage sites and the site is not yet fully functional, so it is still not online (though the source code is available <a href="https://github.com/piever/InteractDemos">here</a> and it can be deployed locally).</p>

<h2 id="the-web-app">The web app</h2>

<p>Using the new Interact library, I put together an example web app
The first component of the project consisted in developing an app to analyze and visualize tabular data. The corresponding code is available at the <a href="https://github.com/piever/Sputnik.jl">Sputnik</a> repository.</p>

<p>The app is consists of a left pane where the user can load, filter or style the data and a right pane for showing the resulting spreadsheet or create a plot using either <a href="https://github.com/JuliaPlots/StatPlots.jl">StatPlots</a> or <a href="https://github.com/piever/GroupedErrors.jl">GroupedErrors</a>:</p>

<p><figure><img src="../../images/bulma.png" alt="style"></figure></p>

<h2 id="modularization-and-composability">Modularization and composability</h2>

<p>While the app is self-contained and usable for quick and interactive data analysis, my mentor strongly recommended (and I agree with his point of view) that in order to make the project widely useful we should find a way to split the app into modular components that different packages could use. We should also allow different packages to contribute their own widgets to the app, with the ultimate purpose of creating a &quot;Widget ecosystem&quot; (pretty much like the current plotting ecosystem).</p>

<h3 id="a-technical-stumbling-block">A technical stumbling block</h3>

<p>The original InteractNext (as well as early version of InteractBase) relied on the Vue.js to sync values from Julia with values from HTML widgets with two-way binding (as soon as I update the Julia value the GUI updates and as soon as the user enters new input the Julia value updates). However while using this approach I ran into a major technical difficulty (issue <a href="https://github.com/JuliaGizmos/Vue.jl/issues/8">#8</a>): the Julia port of Vue.js didn't allow nesting widgets, meaning one widget couldn't have another widget as a component. Neither my mentor nor I could fix this within the Vue framework and, to solve the issue, I chose a different javascript framework (Knockout.js) and created a <a href="https://github.com/JuliaGizmos/Knockout.jl">Julia port</a> and ported the Interact packages to this new framework.</p>

<h3 id="a-recipe-framework">A recipe framework</h3>

<p>Inspired by the <a href="https://docs.juliaplots.org/latest/recipes/">Plots.jl recipes</a> I created a framework to define &quot;interactive recipes&quot; in an external package while taking only a minimal dependency on the pure Julia <a href="https://github.com/piever/Widgets.jl">Widgets</a> package. The recipe framework is documented <a href="https://juliagizmos.github.io/Interact.jl/latest/custom_widgets.html">here</a>. Essentially the user should define what input their recipe takes, what component are generated, what is the output and how it gets displayed.</p>

<p>While this framework has not yet been widely used / tested, I've already used it to create some recipes in several packages:</p>

<ul>
<li><a href="https://github.com/JuliaPlots/StatPlots.jl#visualizing-a-table-interactively">StatPlots recipe</a> to make plots from a table</li>
<li><a href="https://github.com/JuliaComputing/JuliaDB.jl/pull/215">OnlineStats recipe</a> still WIP</li>
<li><a href="https://piever.github.io/TableWidgets.jl/latest/api_reference.html">TableWidgets recipes</a> to visualize and manipulate tables</li>
</ul>

<p>Together, this recipes allow to reproduce the functionality of the original monolithic Sputnik app but are more easily composable and can be mixed and matched.</p>

<h3 id="composing-recipes">Composing recipes</h3>

<p>Composing recipes happens in two ways:</p>

<ul>
<li>Some recipes can accept <code>Observables</code> as input (meaning <code>Refs</code> to Julia values that can be updated). In this case one can simply feed the output of a recipe as input of another</li>
<li>There is a method <code>widget(f::Function, w; init)</code> that as soon as widget <code>w</code> is changed, calls function <code>f</code> on it and displays the result as a widget. This is particularly usefult when <code>w</code> has initially no meaningful value (e.g. a <code>filepicker</code> before the user chose anything), in which case one can set <code>init</code> to some initial widget to be displayed before the user gives the input</li>
</ul>

<p>Here's for example how one would create a small app that loads data, filters it, allows a custom manipulation and then makes plots in a few lines of code using the above composability techniques.</p>

<p>First of all, we can simply create an app that, starting from a table, composes the filtering / editing / plotting:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#a6e22e">@widget</span> wdg <span style="color:#66d9ef">function</span> mypipeline(t)
    (t isa Observable) <span style="color:#f92672">||</span> (t <span style="color:#f92672">=</span> Observable{<span style="color:#66d9ef">Any</span>}(t))
    <span style="color:#f92672">:</span>table <span style="color:#f92672">=</span> t
    <span style="color:#f92672">:</span>filter <span style="color:#f92672">=</span> addfilter(<span style="color:#f92672">:</span>table)
    <span style="color:#f92672">:</span>editor <span style="color:#f92672">=</span> dataeditor(<span style="color:#f92672">:</span>filter)
    <span style="color:#f92672">:</span>plotter <span style="color:#f92672">=</span> dataviewer(<span style="color:#f92672">:</span>editor)

    <span style="color:#a6e22e">@layout!</span> wdg tabulator(OrderedDict(<span style="color:#e6db74">&#34;filter&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">:</span>filter, <span style="color:#e6db74">&#34;editor&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">:</span>editor, <span style="color:#e6db74">&#34;plotter&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#f92672">:</span>plotter))
<span style="color:#66d9ef">end</span></code></pre></div>
<p>And then we can add a method to start with a <code>filepicker</code> if we don't provide a table:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#66d9ef">function</span> mypipeline(t)
    wdg <span style="color:#f92672">=</span> filepicker()
    widget(mypipeline∘loadtable, wdg, init <span style="color:#f92672">=</span> wdg) <span style="color:#75715e"># initialize the widget as a filepicker, when the filepicker gets used, replace with the output of `mypipeline` called with the loaded table</span>
<span style="color:#66d9ef">end</span></code></pre></div>
<p>This video demostrates how this simple recipe works:</p>

<iframe src="https://player.vimeo.com/video/283056625" width="640" height="360" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>

<p>Note that as soon as I filter the data, it already gets updated in the &quot;editor&quot; section and as soon as I add a column in the &quot;editor&quot; section, it appears in the &quot;plotter&quot; dropdown.</p>

<h2 id="conclusions">Conclusions</h2>

<p>Overall this GSoC was an extremely interesting experience that allowed me to focus on an open source project for a long period of time, something I had never done before and I am grateful for this opportunity. I feel I've learnt a lot on a broad range of topics, spanning form JavaScript frameworks and CSS frameworks on the web development side, to composable design and  metaprogramming to create a DSL for creating widget on the Julia side.</p>

<p>I hope that the packages developed with the help of my mentor can be useful for the Julia community and potentially can convince also inexperienced programmers to get started with Julia in these more graphical environments.</p>

<h2 id="acknowledgments">Acknowledgments</h2>

<p>I benefited immensely from the guidance (both conceptual and technical) as well as the occasionally crazy ideas of my mentor Shashi Gowda. In particular most of the ideas on the widget recipe framework come from a series of lengthy discussions we had, spanning several GitHub issues / Slack conversations.</p>

<p>I would also like to acknowledge the Julia community that helped me technically when I got stuck using library / Julia Base functions I was not familiar with. In particular, the help of another GSoC student, Sebastian Pfitzner, was instrumental in getting things working properly in Jupyter Notebook and in Juno (a Julia IDE he has been developing) and in sharing with me some of his knowledge of front-end development. I'm also thankful to Robin Deits for his work on WebIO, the underlying technology upon which the Interact ecosystem is built, and to Joel Mason, for his work on InteractNext, the previous iteration of this design, also a GSoC project.</p>

      </section>
      


    </article>
    <div class="ph3 mt2 mt6-ns">
      







  <div class="bg-light-gray pa3">
    <ul>
      <li class="list b mb3">
        13 More Posts
      </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/sputnik5/" class="link ph2 pv2 db black o-50">
            Sputnik project, final update
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/sputnik4/" class="link ph2 pv2 db black">
            Sputnik project, fourth update
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/sputnik3/" class="link ph2 pv2 db black">
            Sputnik project, third update
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/sputnik2/" class="link ph2 pv2 db black">
            Sputnik project, second update
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/sputnik1/" class="link ph2 pv2 db black">
            Sputnik project, first update
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/juliadb/" class="link ph2 pv2 db black">
            Manipulating data: JuliaDB
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/julia_chapter8/" class="link ph2 pv2 db black">
            Chapter VIII: Functions: can we make our own?
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/julia_chapter7/" class="link ph2 pv2 db black">
            Chapter VII: Plots and dots
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/julia_chapter6/" class="link ph2 pv2 db black">
            Chapter VI: Arrays and the for loop
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/julia_chapter5/" class="link ph2 pv2 db black">
            Chapter V: Conditionals
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/julia_chapter4/" class="link ph2 pv2 db black">
            Chapter IV: The while loop
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/julia_chapter3/" class="link ph2 pv2 db black">
            Chapter III: Variable assignment
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/julia_chapter2/" class="link ph2 pv2 db black">
            Chapter II: Numbers
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/simpleblog/post/julia_chapter1/" class="link ph2 pv2 db black">
            Chapter I: Hello, Julia
          </a>
        </li>
      
    </ul>
  </div>


    </div>
  </div>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
    <link rel="stylesheet" type="text/css" href="/simpleblog/css/style.css">
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          
          
          processEscapes: true,
          processEnvironments: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
          TeX: { equationNumbers: { autoNumber: "AMS" },
          extensions: ["AMSmath.js", "AMSsymbols.js"] }
          },
        CommonHTML: { linebreaks: { automatic: true } },
        "HTML-CSS": { linebreaks: { automatic: true } },
        SVG: { linebreaks: { automatic: true } }
      });
    </script>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>


    <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://piever.github.io/simpleblog/" >
    &copy; 2018 Thoughts and things
  </a>
  







  <a href="https://github.com/piever" class="link-transition github link dib z-999 pt3 pt0-l mr2" title="Github link">
    <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

  </a>


  </div>

  <div id="disqus_thread"></div>
<script>





(function() { 
  var d = document, s = d.createElement('script');
  s.src = 'https://piever-simpleblog.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</footer>

    <script src="https://piever.github.io/simpleblog/dist/app.bundle.js" async></script>

  </body>
</html>
